
model User {
  id                Int                   @id @default(autoincrement())
  email             String                @unique
  password          String
  name              String?
  role              Role                  @default(USER)
  organization_id   Int?                  @map("organization_id")
  createdAt         DateTime              @default(now()) @map("created_at")
  updatedAt         DateTime              @updatedAt @map("updated_at")
  activities        Activity[]
  cases             Case[]
  evidenceHandlings ChainOfCustody[]
  notes             Note[]
  qaResponses       QAChecklistResponse[] @relation("CompletedBy")
  assignedTasks     Task[]                @relation("AssignedTo")
  organization      Organization?         @relation(fields: [organization_id], references: [id])
  generatedReports  GeneratedReport[]
  title             String?
  auditLogs         AuditLog[]
  isOrgAdmin        Boolean               @default(false) @map("is_org_admin")
  qaTemplates       QATemplate[]          // Add this line

  @@map("users")
}

model QATemplate {
  id              Int              @id @default(autoincrement())
  name            String
  type            String           @default("ORGANIZATION")
  organization    Organization     @relation(fields: [organization_id], references: [id], onDelete: Cascade)
  organization_id Int              @map("organization_id")
  user            User?            @relation(fields: [user_id], references: [id])
  user_id         Int?             @map("user_id")
  checklistItems  QAChecklistItem[]
  createdAt       DateTime         @default(now()) @map("created_at")
  updatedAt       DateTime         @updatedAt @map("updated_at")

  @@map("qa_templates")
  @@index([user_id])
}
